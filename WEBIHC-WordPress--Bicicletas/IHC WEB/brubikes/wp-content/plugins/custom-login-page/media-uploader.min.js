var file_frame;jQuery(document).ready(function(){jQuery("[id$='_url']").each(function(e,t){var n=jQuery(t).attr("id").split("_")[0];if(jQuery("#"+n+"_url").val()==""){jQuery("#"+n+"_upload").show();jQuery("#"+n+"_preview").hide();jQuery("#"+n+"_remove").hide()}else{jQuery("#"+n+"_upload").hide();jQuery("#"+n+"_preview").show();jQuery("#"+n+"_remove").show()}});jQuery(".upload-button").on("click",function(e){var t=jQuery(this).prop("name");e.preventDefault();if(file_frame){file_frame.open();return}file_frame=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:false});file_frame.on("select",function(){img=file_frame.state().get("selection").first();jQuery("#"+t+"_url").val(img.attributes.url);jQuery("#"+t+"_upload").hide();jQuery("#"+t+"_preview").show();jQuery("#"+t+"_remove").show();if(t=="video"){var e={action:"video_preview",ajax_nonce:jQuery("#ajax_nonce").val(),video_url:img.attributes.url,video_width:jQuery("#video_width").val(),video_height:jQuery("#video_height").val(),video_poster:jQuery("#poster_url").val(),video_loop:jQuery("#video_loop:checked").val(),video_autoplay:jQuery("#video_autoplay:checked").val(),video_preload:jQuery("#video_preload").val(),video_class:jQuery("#video_class").val(),video_id:jQuery("#video_id").val()};jQuery.post(ajaxurl,e,function(e){jQuery("#"+t+"_preview").html(e)})}else{jQuery("#"+t+"_preview>img").attr("src",img.attributes.url)}});file_frame.open()});jQuery(".remove-button").on("click",function(){prefix=jQuery(this).prop("name");if(prefix=="video"){jQuery("#video_preview").html("");jQuery("#video_url").val("");jQuery("#video_upload").show();jQuery("#video_preview").hide();jQuery("#video_remove").hide();jQuery("#poster_preview>img").attr("src","");jQuery("#poster_url").val("");jQuery("#poster_upload").show();jQuery("#poster_preview").hide();jQuery("#poster_remove").hide()}else{jQuery("#"+prefix+"_preview>img").attr("src","");jQuery("#"+prefix+"_url").val("");jQuery("#"+prefix+"_upload").show();jQuery("#"+prefix+"_preview").hide();jQuery("#"+prefix+"_remove").hide()}})})